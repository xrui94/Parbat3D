### Generated by Winemaker 0.7.4


SRCDIR                = .
SUBDIRS               =
DLLS                  =
EXES                  = parbat.exe



### Common settings

CEXTRA                =
CXXEXTRA              = -ggdb `pkg-config gtkmm-4.0 --cflags` `pkg-config gdal --cflags` -Wno-deprecated
RCEXTRA               =
DEFINES               = -DNOMINMAX -D_REENTRANT
INCLUDE_PATH          = -Isrc -Iresources
OBJ_DIR               = build/objects
BIN_DIR               = build
DLL_PATH              =
DLL_IMPORTS           =
LIBRARY_PATH          =
LIBRARIES             = `pkg-config gdal --libs` -lcomctl32 -lopengl32 -lglu32 -lgdi32 -lcomdlg32 `pkg-config gtkmm-4.0 --libs`


### parbat.exe sources and settings

parbat_exe_MODULE     = parbat.exe
parbat_exe_C_SRCS     = src/point_texture.c
parbat_exe_CXX_SRCS   = src/BandInfo.cpp \
            src/BatchIniFile.cpp \
            src/ContrastAdvWindow.cpp \
            src/ContrastWindow.cpp \
            src/CoordinateInfo.cpp \
            src/DisplayTab.cpp \
            src/DisplayWindow.cpp \
            src/FeatureSpace.cpp \
            src/FeatureSpaceGL.cpp \
            src/FeatureTab.cpp \
            src/GLContainer.cpp \
            src/GLText.cpp \
            src/GLView.cpp \
            src/ImageFile.cpp \
            src/ImageGL.cpp \
            src/ImageHandler.cpp \
            src/ImageProperties.cpp \
            src/ImageTab.cpp \
            src/ImageTileSet.cpp \
            src/ImageViewport.cpp \
            src/ImageWindow.cpp \
            src/IniFile.cpp \
            src/MainWindow.cpp \
            src/OverviewGL.cpp \
            src/OverviewWindow.cpp \
            src/PrefsWindow.cpp \
            src/ProgressWindow.cpp \
            src/QueryTab.cpp \
            src/ROI.cpp \
            src/ROIFile.cpp \
            src/ROISet.cpp \
            src/ROIWindow.cpp \
            src/ScrollBox.cpp \
            src/Settings.cpp \
            src/StickyWindowManager.cpp \
            src/StringUtils.cpp \
            src/TestUtils.cpp \
            src/ToolTab.cpp \
            src/ToolWindow.cpp \
            src/ViewportListener.cpp \
            src/Window.cpp \
            src/console.cpp \
            src/main.cpp
parbat_exe_RC_SRCS    = resources/rsrc.rc
# Subsystem: default windows; set CONSOLE=1 to build console for debugging
SUBSYSTEM             = windows
ifdef CONSOLE
SUBSYSTEM             = console
endif
parbat_exe_LDFLAGS    = -m$(SUBSYSTEM)
parbat_exe_DLL_PATH   =
parbat_exe_DLLS       = odbc32 \
			ole32 \
			oleaut32 \
			winspool \
			odbccp32
parbat_exe_LIBRARY_PATH=
parbat_exe_LIBRARIES  = uuid

parbat_exe_OBJS       = $(parbat_exe_C_SRCS:src/%.c=$(OBJ_DIR)/%.o) \
			$(parbat_exe_CXX_SRCS:src/%.cpp=$(OBJ_DIR)/%.o) \
			$(parbat_exe_RC_SRCS:resources/%.rc=$(OBJ_DIR)/%.res)



### Global source lists

C_SRCS                = $(parbat_exe_C_SRCS)
CXX_SRCS              = $(parbat_exe_CXX_SRCS)
RC_SRCS               = $(parbat_exe_RC_SRCS)


### Tools

CC = gcc
CXX = g++
RC = windres


### Generic targets

all: prepare $(BIN_DIR)/$(parbat_exe_MODULE)

### Build rules

.PHONY: all clean dummy prepare

$(SUBDIRS): dummy
	@cd $@ && $(MAKE)

prepare: $(OBJ_DIR) $(BIN_DIR)

$(OBJ_DIR):
	mkdir -p $(OBJ_DIR)

$(BIN_DIR):
	mkdir -p $(BIN_DIR)

$(OBJ_DIR)/PchApp.h.gch: src/PchApp.h
	$(CXX) -c $(CXXFLAGS) $(CXXEXTRA) $(DEFINCL) -o $@ $<

# Implicit rules

.SUFFIXES:
DEFINCL = $(INCLUDE_PATH) $(DEFINES) $(OPTIONS)

$(OBJ_DIR)/%.o: src/%.c
	$(CC) -c $(CFLAGS) $(CEXTRA) $(DEFINCL) -o $@ $<

$(OBJ_DIR)/%.o: src/%.cpp
	$(CXX) -c $(CXXFLAGS) $(CXXEXTRA) $(DEFINCL) -o $@ $<

$(OBJ_DIR)/%.o: src/%.cxx
	$(CXX) -c $(CXXFLAGS) $(CXXEXTRA) $(DEFINCL) -o $@ $<

$(OBJ_DIR)/%.res: resources/%.rc
	$(RC) -O coff $(RCEXTRA) $(DEFINCL) -o $@ $<

.h.gch:
	$(CXX) -c $(CXXFLAGS) $(CXXEXTRA) $(DEFINCL) -o $@ $<

# Rules for cleaning

CLEAN_FILES     = $(OBJ_DIR)/PchApp.h.gch y.tab.c y.tab.h lex.yy.c core *.orig *.rej \
                  \\\#*\\\# *~ *% .\\\#*

clean:: $(SUBDIRS:%=%/__clean__) $(EXTRASUBDIRS:%=%/__clean__)
	$(RM) $(CLEAN_FILES) $(parbat_exe_OBJS) $(BIN_DIR)/$(parbat_exe_MODULE)
	$(RM) $(DLLS:%=%.so) $(EXES:%=%.so) $(EXES:%.exe=%)

$(SUBDIRS:%=%/__clean__): dummy
	cd `dirname $@` && $(MAKE) clean

$(EXTRASUBDIRS:%=%/__clean__): dummy
	-cd `dirname $@` && $(RM) $(CLEAN_FILES)

### Target specific build rules
DEFLIB = $(LIBRARY_PATH) $(LIBRARIES) $(DLL_PATH) $(DLL_IMPORTS:%=-l%)

$(BIN_DIR)/$(parbat_exe_MODULE): $(OBJ_DIR)/PchApp.h.gch $(parbat_exe_OBJS)
	$(CXX) $(parbat_exe_LDFLAGS) -o $@ $(parbat_exe_OBJS) $(parbat_exe_LIBRARY_PATH) $(DEFLIB) $(parbat_exe_DLLS:%=-l%) $(parbat_exe_LIBRARIES:%=-l%)

run: all
	$(BIN_DIR)/$(parbat_exe_MODULE)


